<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>我的生活</title>
    <meta name="viewport" content="initial-scale=1, maximum-scale=1">
    <link rel="shortcut icon" href="/favicon.ico">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">

    <link rel="stylesheet" href="//g.alicdn.com/msui/sm/0.6.2/css/sm.min.css">
    <link rel="stylesheet" href="//g.alicdn.com/msui/sm/0.6.2/css/sm-extend.min.css">
    <style type="text/css">
        .infinite-scroll-preloader {
            margin-top: -20px;
        }
    </style>
</head>

<body>
    <div class="page-group">
        <div id="page-infinite-scroll-bottom" class="page">
            <header class="bar bar-nav">
                <a class="button button-link button-nav pull-left back" href="/demos/infinite-scroll">
                    <span class="icon icon-left"></span>
                    返回
                </a>
                <h1 class="title">底部无限滚动</h1>
            </header>
            <div class="content infinite-scroll" data-distance="100">
                <div class="list-block">
                    <ul class="list-container">
                        <li class="item-content">
                            <div class="item-inner">
                                <div class="item-title">条目</div>
                            </div>
                        </li>
                        <li class="item-content">
                            <div class="item-inner">
                                <div class="item-title">条目</div>
                            </div>
                        </li>
                        <li class="item-content">
                            <div class="item-inner">
                                <div class="item-title">条目</div>
                            </div>
                        </li>
                        <li class="item-content">
                            <div class="item-inner">
                                <div class="item-title">条目</div>
                            </div>
                        </li>
                        <li class="item-content">
                            <div class="item-inner">
                                <div class="item-title">条目</div>
                            </div>
                        </li>
                        <li class="item-content">
                            <div class="item-inner">
                                <div class="item-title">条目</div>
                            </div>
                        </li>
                        <li class="item-content">
                            <div class="item-inner">
                                <div class="item-title">条目</div>
                            </div>
                        </li>
                        <li class="item-content">
                            <div class="item-inner">
                                <div class="item-title">条目</div>
                            </div>
                        </li>
                        <li class="item-content">
                            <div class="item-inner">
                                <div class="item-title">条目</div>
                            </div>
                        </li>
                        <li class="item-content">
                            <div class="item-inner">
                                <div class="item-title">条目</div>
                            </div>
                        </li>
                        <li class="item-content">
                            <div class="item-inner">
                                <div class="item-title">条目</div>
                            </div>
                        </li>
                        <li class="item-content">
                            <div class="item-inner">
                                <div class="item-title">条目</div>
                            </div>
                        </li>
                        <li class="item-content">
                            <div class="item-inner">
                                <div class="item-title">条目</div>
                            </div>
                        </li>
                        <li class="item-content">
                            <div class="item-inner">
                                <div class="item-title">条目</div>
                            </div>
                        </li>
                    </ul>
                </div>
                <!-- 加载提示符 -->
                <div class="infinite-scroll-preloader">
                    <div class="preloader">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script type='text/javascript' src='//g.alicdn.com/sj/lib/zepto/zepto.min.js' charset='utf-8'></script>
    <script type='text/javascript' src='//g.alicdn.com/msui/sm/0.6.2/js/sm.min.js' charset='utf-8'></script>
    <script type='text/javascript' src='//g.alicdn.com/msui/sm/0.6.2/js/sm-extend.min.js' charset='utf-8'></script>
    <script>
        $(function () {
            $(document).on("pageInit", "#page-infinite-scroll-bottom", function (e, id, page) {
                console.log(page)
                var loading = false;

                var itemsPerLoad = 20;

                var maxItems = 100;
                var lastIndex = $('.list-container li').length;
                function addItems(number, lastIndex) {

                    var html = '';
                    for (var i = lastIndex + 1; i <= lastIndex + number; i++) {
                        html += '<li class="item-content"><div class="item-inner"><div class="item-title">鏂版潯鐩�</div></div></li>';
                    }

                    $('.infinite-scroll .list-container').append(html);
                }
                $(page).on('infinite', function () {

                    if (loading) return;

                    loading = true;

                    setTimeout(function () {

                        loading = false;
                        if (lastIndex >= maxItems) {

                            $.detachInfiniteScroll($('.infinite-scroll'));

                            $('.infinite-scroll-preloader').remove();
                            return;
                        }
                        addItems(itemsPerLoad, lastIndex);

                        lastIndex = $('.list-container li').length;
                        $.refreshScroller();
                    }, 1000);
                });
            });
        })
    </script>

</body>

</html>